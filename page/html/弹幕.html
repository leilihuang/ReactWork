<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        .box{width:100%;height:100%;}
        .box .srecc{width:100%;height:100%;position:absolute;top:0;left:0;}
        .mark{position:relative;width:100%;height:100%;opacity:0.5;filter:alpha(opacity:1);z-index:1;}
        .mark div{position:absolute;font-size:30px;white-space:nowrap;font-weight:bold;line-height:40px;z-index:4;
            min-width: 50px;}
    </style>
</head>
<body>
<div class="box">
    <div class="srecc">
        <div class="mark">

        </div>
    </div>
</div>
<script src="../../../lib/jquery-1.11.2.min.js"></script>
<script>
    $(function () {
        var dan={
            texts:['s','sss','我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊','s','sss',
                '我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊','我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊',
                '我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊','我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊',
                's','sss','我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊','s','sss',
                '我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊','我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊',
                '我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊','我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊',
                's','sss','我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊','s','sss',
                '我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊','我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊',
                '我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊','我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊',
                's','sss','我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊','s','sss',
                '我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊','我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊',
                '我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊','我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊',
                's','sss','我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊','s','sss',
                '我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊','我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊',
                '我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊','我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊',
                's','sss','我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊','s','sss',
                '我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊','我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊',
                '我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊','我的啊','是你的马啊啊','s','sss','我的啊','是你的马啊啊'],
            num:0,
            lev:10000,
            lev2:21000,
            lev3:22000,
            init: function () {
                this.text();
            },
            text:function(){
                var $mark=$('.mark'),_this=this;
                for(var i=0;i<_this.texts.length;i++){
                    var lab='<div style="right:20px;top:0;opacity:1;color:'+_this.getRandomColor()+'">'+_this.texts[i]+'</div>';
                    $mark.append(lab)
                    _this.init_danmu();
                }
                _this.eachBind();
            },
            eachBind: function () {
                var _this=this;


            },
            init_danmu: function () {
                var _this=this;
                var _top= 0,_left= 0,_time= 0,_w=0;
                $(".mark div").show().each(function (i) {
                     _w=_left=$(window).width()+30;
                    var _height=$(window).height();
                    _top+=$(this).height();
                    _this.num++;
                    if(_this.num==parseInt(_height/$(this).height())){
                        _this.num=0;
                        _w+=$(this).width();
                    }
                    _time=_this.lev+2000*_this.num;
                    if(_top>_height){
                        _top=0;
                    }
                    $(this).css({
                        left:_w,
                        top:_top
                    });
                    var time=_this.lev;
                    if($(this).index() % 2){
                        time=_this.lev2;
                    }else if($(this).index() % 3){
                        time=_this.lev3;
                    }
//                    console.log($(this).width())
                    $(this).animate({left:"-"+_left+"px"},_time, function () {
                        $(this).remove();
                    });
                })
            },
            getRandomColor: function () {
                return "#"+ (function (h) {
                            return new Array(7 - h.length).join("0")+h;
                        })((Math.random() * 0x1000000 << 0).toString(16));
            }
        }
        dan.init();
    })
</script>
</body>
</html>